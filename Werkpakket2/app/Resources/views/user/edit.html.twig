{% extends 'base.html.twig' %}
{% block headertitle %}
    <h1>Modify {{ user.username | capitalize }}</h1>
{% endblock %}
{% block body %}
    <div class="row">
        <div class="col-md-4">
            {% if is_granted('ROLE_ADMIN') %}
                <div>
                    <div id="menu-settingsLeftBlock">
                        <a href="{{ path('user_index') }}"> <div class="return-button"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span><p>Back</p></div></a>
                    </div>
            {% endif %}
                </div>
        </div>
        </div>
    <div class="row">
        {{ form_start(edit_form, {'attr': {'id': 'edit_form'}}) }}
        {{ form_widget(edit_form) }}


    </div>
    <div class="row">
        <div class="col-md-5"></div>

        <div class="col-md-2">
            <button type="submit" class="nice-button half-button form-button edit">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                <p>Edit</p>
            </button>
            {{ form_end(edit_form) }}
        </div>
    </div>
    <div class="row">
        <div class="col-md-5"></div>
        <div class="col-md-1">
            <a href="{{ path('user_index') }}"><div class="nice-button half-button form-button logout" ><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span><p>Back</p></div></a>
        </div>
        <div class="col-md-1">
            {{ form_start(delete_form) }}
            <a data-toggle="modal" data-target="#deleteModal"><div class="nice-button half-button form-button delete">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                    <p>Delete</p>
                </div>
            </a>
            <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <p>Do you really want to delete this user?</p>
                            <a data-dismiss="modal"><div class="col-md-5 nice-button"><p>No</p></div></a>
                            <button type="submit" class="col-md-5 nice-button"><p>Yes</p></button></a>
                        </div>
                    </div>
                </div>
            </div>
            {{ form_end(delete_form) }}

            <div class="modal fade" id="messageModal" tabindex="-1" role="dialog" aria-labelledby="myModal">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-body">
                            <p>User edited!</p>
                            <a data-dismiss="modal"><div class="col-md-5 nice-button"><p>Ok</p></div></a>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
    </div>

{% endblock %}
{% block javascripts %}
    <script>
        $("#edit_form").submit(function(e){
            e.preventDefault();
            $("#messageModal").modal("show");
        });
    </script>
{% endblock %}